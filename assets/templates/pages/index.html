{% from "layout/layout.html" import html with context %}
{% from "components/github.html" import github_lang with context %}
{% from "components/github.html" import github_stars with context %}
{% from "components/github.html" import github_forks with context %}

{% call html(path="/index.html", css=["/pages_index.css"], js=["/layout.js", "/index.js"]) %}
<main class="p-4">
  <div class="masonry d-grid ai-end ji-centre">
    {% for spec in specs %}
    {% set spec_uri = '/' ~ spec.name ~ '/index.html' | urlencode %}
    <figure class="card d-grid m-0">
      {% if spec.images %} 
      {% set image = spec.images[0] %}
      <a href="{{ spec_uri }}" class="figure-img d-grid mp-0">
        <img class="img-responsive w-100" src={{ image }} />
        <div class="figure-facade d-none ji-centre ai-centre">
          <i class="fas fa-chevron-right"></i>
        </div>
      </a>
      {% endif %}
      <h4
        class="figure-title text-uppercase text-centre text-ellipsis py-2 px-4"
      >
        <a href="{{ spec_uri }}" class="invis-link">
          {{ spec.title | e }}
        </a>
      </h4>
      <div class="figure-meta d-grid grid-col jc-start col-gap-4 px-4 pb-2"
      >
        {{ github_lang(lang=spec.language, colour=spec.colour)}}
        {{ github_stars(stars=spec.stargazers_count) }} 
        {{ github_forks(forks=spec.forks_count) }}
      </div>
      <figcaption class="figure-detail text-ellipsis text-justify px-4 pb-2">
        {{ (spec.description or "") | e }}
      </figcaption>
    </figure>
    {% endfor %}
    <div class="col-gap-sizer"></div>
  </div>
</main>
{% endcall %}

